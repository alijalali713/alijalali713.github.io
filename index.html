<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ุงูููฺฏุฑุงูฺฉ ุจุฑูุงูู ุงูุฏุงู ุตูุนุช ุงุณุชุงู ฺฉุฑูุงู (ฑดฐธ-ฑดฐด)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Vazirmatn', sans-serif;
            scroll-behavior: smooth;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 400px;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 350px;
            }
        }
        .gantt-chart-container {
            position: relative;
            width: 100%;
            height: 500px;
        }
        .kpi-card {
            background-color: #051923;
            color: white;
            border-right: 5px solid #00A6FB;
        }
        .loader {
            border: 5px solid #f3f3f3;
            border-top: 5px solid #0582CA;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="bg-gray-100 text-gray-800">

    <header class="bg-[#003554] text-white p-8 text-center shadow-lg">
        <h1 class="text-4xl md:text-5xl font-black mb-2">ฺฉุฑูุงูู ุฑู ุจู ุชุนุงู: ฺุดูโุงูุฏุงุฒ ุตูุนุช ฑดฐธ</h1>
        <p class="text-lg md:text-xl font-light">ฺฉ ููุดู ุฑุงู ธ,ฒฑฐ ููุงุฑุฏ ุชููุงู ุจุฑุง ฺฏุฐุงุฑ ุงุฒ ุงูุชุตุงุฏ ูุจุชู ุจุฑ ููุงุจุน ุจู ูุทุจ ุตูุนุช ูพุดุฑูุชู ู ูพุงุฏุงุฑ</p>
    </header>

    <main class="container mx-auto p-4 md:p-8">

        <section id="diagnosis" class="mb-12">
            <h2 class="text-3xl font-bold text-center mb-8 text-[#006494]">ุชุดุฎุต ุฑุงูุจุฑุฏ: ฺุงูุดโูุง ู ูุงูุนุชโูุง</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8 items-center">
                <div class="bg-white rounded-lg shadow-md p-6">
                    <h3 class="text-xl font-bold mb-4 text-center">ุฏูฺฏุงูฺฏ ุดุฏุฏ ุงูุชุตุงุฏ</h3>
                    <div class="chart-container">
                        <canvas id="dualityChart"></canvas>
                    </div>
                    <p class="text-center mt-4 text-gray-600">ุงู ูููุฏุงุฑ ุจู ูุถูุญ ูุดุงู ูโุฏูุฏ ฺฉู ฺฉูุชุฑ ุงุฒ ฑูช ุงุฒ ูุงุญุฏูุง ุตูุนุช (ุนูุฏุชุงู ุดุฑฺฉุชโูุง ุจุฒุฑฺฏ ูุนุฏู) ุจุด ุงุฒ ทธูช ุงุฒ ุงุฑุฒุด ุงูุฒูุฏู ุตูุนุช ุงุณุชุงู ุฑุง ุชููุฏ ูโฺฉููุฏุ ุฏุฑ ุญุงู ฺฉู ุจุด ุงุฒ ทฐูช ุจูฺฏุงูโูุงุ ูุงุญุฏูุง ุฎุฑุฏ ู ฺฉูฺฺฉ ูุณุชูุฏ. ุงู ุดฺฉุงูุ ฺุงูุด ุงุตู ุชูุณุนู ูุชูุงุฒู ุงุณุช.</p>
                </div>
                <div class="space-y-6">
                    <div class="bg-white rounded-lg shadow-md p-6 flex items-center">
                        <span class="text-6xl mr-6">๐ง</span>
                        <div>
                            <h3 class="text-2xl font-bold text-red-600">ุจุญุฑุงู ุขุจ</h3>
                            <p class="text-gray-600">ฺฉุฑูุงู ุฏุฑ ฺฉ ุงุฒ ุฎุดฺฉโุชุฑู ููุงุทู ุงุฑุงู ูุงูุน ุดุฏู ู ุตูุงุน ฺฉูุฏ ุขู ูุงููุฏ ูููุงุฏ ู ูุณ ุจุง ูุญุฏูุฏุช ุญุงุช ุฏุฑ ููุงุจุน ุขุจ ุฑูุจุฑู ูุณุชูุฏ. ูุฏุฑุช ูพุงุฏุงุฑ ุขุจ ฺฉ ุถุฑูุฑุช ุงูฺฉุงุฑูุงุฐุฑ ุงุณุช.</p>
                        </div>
                    </div>
                    <div class="bg-white rounded-lg shadow-md p-6 flex items-center">
                        <span class="text-6xl mr-6">โก๏ธ</span>
                        <div>
                            <h3 class="text-2xl font-bold text-yellow-500">ูุงุชุฑุงุฒ ุงูุฑฺ</h3>
                            <p class="text-gray-600">ฺฉูุจูุฏ ุจุฑูุ ุจู ูฺู ุฏุฑ ูุตูู ุงูุฌ ูุตุฑูุ ุจู ฺฉ ูุงูุน ุฌุฏ ุจุฑุง ุชููุฏ ูุณุชูุฑ ู ุจูุฑูโุจุฑุฏุงุฑ ฺฉุงูู ุงุฒ ุธุฑูุชโูุง ุตูุนุช ุงุณุชุงู ุชุจุฏู ุดุฏู ุงุณุช.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="investment" class="mb-12 bg-white rounded-lg shadow-xl p-8">
            <h2 class="text-3xl font-bold text-center mb-8 text-[#006494]">ูุฏู ุณุฑูุงูโฺฏุฐุงุฑ: ุงูุฑูโุณุงุฒ ููุงุจุน ุฎุตูุต</h2>
            <p class="text-center max-w-3xl mx-auto mb-8 text-gray-600">ุงู ุฑุงูุจุฑุฏ ุจุฑ ฺฉ ูุฏู ุชุฃูู ูุงู ููุดููุฏ ุงุณุชูุงุฑ ุงุณุช ฺฉู ุฏุฑ ุขู ููุงุจุน ูุญุฏูุฏ ุฏููุช ุจู ุนููุงู ฺฉุงุชุงูุฒูุฑ ุจุฑุง ุฌุฐุจ ุณุฑูุงูโฺฏุฐุงุฑ ฺฏุณุชุฑุฏู ุจุฎุด ุฎุตูุต ุนูู ูโฺฉูุฏ. ุงู ุฑูฺฉุฑุฏุ ูพุงุฏุงุฑ ูุงู ุจุฑูุงูู ุฑุง ุชุถูู ฺฉุฑุฏู ู ฺฉุงุฑุง ุฑุง ุจู ุญุฏุงฺฉุซุฑ ูโุฑุณุงูุฏ.</p>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8 items-center">
                <div class="md:col-span-2 bg-gray-50 rounded-lg p-4">
                    <h3 class="text-xl font-bold mb-4 text-center">ุชูฺฉฺฉ ุณุฑูุงูโฺฏุฐุงุฑ ุนููู ู ุฎุตูุต (ููุงุฑุฏ ุชููุงู)</h3>
                    <div class="chart-container h-96">
                        <canvas id="investmentChart"></canvas>
                    </div>
                </div>
                <div class="text-center space-y-4">
                    <div class="bg-[#0582CA] text-white rounded-lg p-6 shadow-lg">
                        <p class="text-lg">ูุฌููุน ุณุฑูุงูโฺฏุฐุงุฑ</p>
                        <p class="text-5xl font-black">ธ,ฒฑฐ</p>
                        <p class="text-lg">ููุงุฑุฏ ุชููุงู</p>
                    </div>
                    <div class="bg-[#00A6FB] text-white rounded-lg p-6 shadow-lg">
                        <p class="text-lg">ูุณุจุช ุงูุฑู</p>
                        <p class="text-5xl font-black">ฑฐ.ด ุจุฑุงุจุฑ</p>
                        <p class="text-lg">ุจู ุงุฒุง ูุฑ ฑ ุชููุงู ุฏููุช</p>
                    </div>
                </div>
            </div>
        </section>

        <section id="pillars" class="mb-12">
            <h2 class="text-3xl font-bold text-center mb-8 text-[#006494]">ูพูุฌ ูุญูุฑ ุฑูุณุงูุณ ุตูุนุช ฺฉุฑูุงู</h2>
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-6 text-center">
                <div class="bg-white p-6 rounded-lg shadow-md hover:shadow-xl transition-shadow flex flex-col justify-between">
                    <div>
                        <p class="text-5xl mb-4">๐ฉ</p>
                        <h3 class="text-xl font-bold">ุงุจุฑุฎูุดู ููุฒุงุช</h3>
                        <p class="text-gray-600 text-sm">ุชุนูู ุฒูุฌุฑู ุงุฑุฒุด ูุณ ู ูููุงุฏ ุงุฒ ุณูฺฏ ูุนุฏู ุชุง ูุญุตููุงุช ูพุดุฑูุชู.</p>
                    </div>
                    <button class="ai-analysis-btn mt-4 bg-[#00A6FB] text-white px-4 py-2 rounded-lg hover:bg-[#0582CA] transition" data-pillar="ุงุจุฑุฎูุดู ููุฒุงุช">โจ ุชุญูู ููุดููุฏ</button>
                </div>
                <div class="bg-white p-6 rounded-lg shadow-md hover:shadow-xl transition-shadow flex flex-col justify-between">
                    <div>
                        <p class="text-5xl mb-4">๐</p>
                        <h3 class="text-xl font-bold">ุฎูุฏุฑู ู ุณุงุฎุช ูพุดุฑูุชู</h3>
                        <p class="text-gray-600 text-sm">ุงุฑุชูุง ูุทุจ ุฎูุฏุฑูุณุงุฒ ุงุฒ ูููุชุงฺ ุจู ูููุฏุณุ ุทุฑุงุญ ู ุขุฒููู.</p>
                    </div>
                    <button class="ai-analysis-btn mt-4 bg-[#00A6FB] text-white px-4 py-2 rounded-lg hover:bg-[#0582CA] transition" data-pillar="ุฎูุฏุฑู ู ุณุงุฎุช ูพุดุฑูุชู">โจ ุชุญูู ููุดููุฏ</button>
                </div>
                <div class="bg-white p-6 rounded-lg shadow-md hover:shadow-xl transition-shadow flex flex-col justify-between">
                    <div>
                        <p class="text-5xl mb-4">๐ฟ</p>
                        <h3 class="text-xl font-bold">ฺฉุดุงูุฑุฒ ููุงูุฑุงูู</h3>
                        <p class="text-gray-600 text-sm">ูุฏุฑูโุณุงุฒ ูุทุจ ุฌุฑูุช ุจุง ฺฏูุฎุงููโูุง ููุดููุฏ ู ุชฺฉูู ุฒูุฌุฑู ุณุฑุฏ.</p>
                    </div>
                    <button class="ai-analysis-btn mt-4 bg-[#00A6FB] text-white px-4 py-2 rounded-lg hover:bg-[#0582CA] transition" data-pillar="ฺฉุดุงูุฑุฒ ููุงูุฑุงูู">โจ ุชุญูู ููุดููุฏ</button>
                </div>
                <div class="bg-white p-6 rounded-lg shadow-md hover:shadow-xl transition-shadow flex flex-col justify-between">
                    <div>
                        <p class="text-5xl mb-4">โ๏ธ</p>
                        <h3 class="text-xl font-bold">ุงูููุงุจ ุฎูุฑุดุฏ</h3>
                        <p class="text-gray-600 text-sm">ุชุฃูู ุงููุช ุงูุฑฺ ุตูุนุช ู ุงุฌุงุฏ ุฒูุฌุฑู ุงุฑุฒุด ุชุฌูุฒุงุช ุฎูุฑุดุฏ.</p>
                    </div>
                    <button class="ai-analysis-btn mt-4 bg-[#00A6FB] text-white px-4 py-2 rounded-lg hover:bg-[#0582CA] transition" data-pillar="ุงูููุงุจ ุฎูุฑุดุฏ">โจ ุชุญูู ููุดููุฏ</button>
                </div>
                <div class="bg-white p-6 rounded-lg shadow-md hover:shadow-xl transition-shadow flex flex-col justify-between">
                    <div>
                        <p class="text-5xl mb-4">๐ฌ</p>
                        <h3 class="text-xl font-bold">ฺฉุงุดุช ุจุฑุง ุขูุฏู</h3>
                        <p class="text-gray-600 text-sm">ุณุฑูุงูโฺฏุฐุงุฑ ุฏุฑ ุชุญูู ู ุชูุณุนู ุตูุนุช ููุธููุฑ ุชุชุงููู.</p>
                    </div>
                     <button class="ai-analysis-btn mt-4 bg-[#00A6FB] text-white px-4 py-2 rounded-lg hover:bg-[#0582CA] transition" data-pillar="ุตูุนุช ุชุชุงููู">โจ ุชุญูู ููุดููุฏ</button>
                </div>
            </div>
        </section>

        <section id="timeline" class="mb-12 bg-white rounded-lg shadow-xl p-8">
            <h2 class="text-3xl font-bold text-center mb-8 text-[#006494]">ููุดู ุฑุงู ู ุฒูุงูโุจูุฏ ูพุฑูฺูโูุง ฺฉูุฏ</h2>
            <p class="text-center max-w-3xl mx-auto mb-8 text-gray-600">ุงู ูููุฏุงุฑ ุฒูุงูโุจูุฏ ุงุฌุฑุง ูพุฑูฺูโูุง ูพุดุฑุงู ุฑุง ุงุฒ ุณุงู ฑดฐด ุชุง ฑดฐธ ูุดุงู ูโุฏูุฏ. ูุฑ ููุงุฑ ูุดุงูโุฏููุฏู ุจุงุฒู ุฒูุงู ุงุฌุฑุง ฺฉ ูพุฑูฺู ฺฉูุฏ ุงุณุช ฺฉู ุจู ุชุญูู ฺุดูโุงูุฏุงุฒ ุตูุนุช ุงุณุชุงู ฺฉูฺฉ ูโฺฉูุฏ.</p>
            <div class="gantt-chart-container">
                <canvas id="timelineChart"></canvas>
            </div>
        </section>
        
        <section id="kpis" class="mb-12">
            <h2 class="text-3xl font-bold text-center mb-8 text-[#006494]">ุงูุฏุงู ฺฉูุฏ ุชุง ุงูู ฑดฐธ</h2>
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6">
                <div class="kpi-card p-6 rounded-lg shadow-md text-center">
                    <p class="text-5xl font-black text-[#00A6FB]">-ถฐูช</p>
                    <p class="mt-2 text-lg">ฺฉุงูุด ูุงูฺฏู ุฒูุงู ุตุฏูุฑ ูุฌูุฒูุง ุณุฑูุงูโฺฏุฐุงุฑ</p>
                </div>
                <div class="kpi-card p-6 rounded-lg shadow-md text-center">
                    <p class="text-5xl font-black text-[#00A6FB]">ณฐฐ ูฺฏุงูุงุช</p>
                    <p class="mt-2 text-lg">ุธุฑูุช ูุตุจโุดุฏู ุฌุฏุฏ ูุฑูฺฏุงูโูุง ุฎูุฑุดุฏ</p>
                </div>
                <div class="kpi-card p-6 rounded-lg shadow-md text-center">
                    <p class="text-5xl font-black text-[#00A6FB]">-ดฐูช</p>
                    <p class="mt-2 text-lg">ฺฉุงูุด ุถุงุนุงุช ูพุณ ุงุฒ ุจุฑุฏุงุดุช ุฏุฑ ูุญุตููุงุช ฺฉุดุงูุฑุฒ ุฌุฑูุช</p>
                </div>
                <div class="kpi-card p-6 rounded-lg shadow-md text-center">
                    <p class="text-5xl font-black text-[#00A6FB]">ตฐ ููู</p>
                    <p class="mt-2 text-lg">ุจููโุณุงุฒ ูุทุนุงุช ู ุชุฌูุฒุงุช ฺฉูุฏ ุฏุฑ ุตูุนุช ูููุงุฏ</p>
                </div>
            </div>
        </section>

        <section id="governance" class="mb-12">
            <h2 class="text-3xl font-bold text-center mb-8 text-[#006494]">ุณุงุฎุชุงุฑ ุฑุงูุจุฑ ู ุงุฌุฑุง</h2>
            <div class="max-w-2xl mx-auto">
                <div class="bg-white p-6 rounded-lg shadow-md text-center">
                    <div class="p-4 bg-[#003554] text-white rounded-t-lg">
                        <h3 class="text-xl font-bold">ุดูุฑุง ุณุงุณุชโฺฏุฐุงุฑ ุตูุนุช ุงุณุชุงู</h3>
                        <p class="text-sm">(ุฑุงุณุช ูุดุชุฑฺฉ ุงุณุชุงูุฏุงุฑ ู ุงุชุงู ุจุงุฒุฑฺฏุงู)</p>
                    </div>
                    <div class="h-12 w-1 bg-[#0582CA] mx-auto"></div>
                    <div class="p-4 bg-[#0582CA] text-white rounded-b-lg">
                        <h3 class="text-xl font-bold">ุฏูุชุฑ ูุฏุฑุช ูพุฑูฺู (PMO)</h3>
                        <p class="text-sm">(ุจุงุฒู ุงุฌุฑุง ู ูุฑฺฉุฒ ุนููุงุช)</p>
                    </div>
                </div>
                <p class="text-center mt-4 text-gray-600">ฺฉ ุณุงุฎุชุงุฑ ุฑุงูุจุฑ ฺุงุจฺฉ ู ฺฉุงุฑุขูุฏุ ูุชุดฺฉู ุงุฒ ููุงุฏ ุณุงุณุชโฺฏุฐุงุฑ ู ุจุงุฒู ุงุฌุฑุงุ ูุธูู ููุงููฺฏุ ูุธุงุฑุช ุจุฑ ุดุงุฎุตโูุง ู ุฑูุน ููุงูุน ุฑุง ุจุฑ ุนูุฏู ุฏุงุฑุฏ ุชุง ุงุฌุฑุง ููููุชโุขูุฒ ุจุฑูุงูู ุชุถูู ุดูุฏ.</p>
            </div>
        </section>

        <section id="ai-assistant" class="mb-12 bg-white rounded-lg shadow-xl p-8">
            <h2 class="text-3xl font-bold text-center mb-4 text-[#006494]">โจ ุงุฒ ุฏุณุชุงุฑ ููุดููุฏ ุจูพุฑุณุฏ</h2>
            <p class="text-center max-w-3xl mx-auto mb-6 text-gray-600">ุณูุงู ุฏุฑ ููุฑุฏ ุงู ุจุฑูุงูู ุฑุงูุจุฑุฏ ุฏุงุฑุฏุ ุงุฒ ุฏุณุชุงุฑ ููุดููุฏ ูุจุชู ุจุฑ Gemini ุจูพุฑุณุฏ ุชุง ฺฉ ุชุญูู ููุฑ ุฏุฑุงูุช ฺฉูุฏ.</p>
            <form id="ai-assistant-form" class="max-w-2xl mx-auto">
                <div class="flex flex-col sm:flex-row gap-2">
                    <input type="text" id="ai-question-input" placeholder="ูุซุงู: ุจุฒุฑฺฏุชุฑู ุฑุณฺฉโูุง ุงู ุทุฑุญ ฺุณุชุ" class="flex-grow p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#00A6FB] focus:outline-none">
                    <button type="submit" class="bg-[#003554] text-white px-6 py-3 rounded-lg hover:bg-[#051923] transition font-bold">ุงุฑุณุงู</button>
                </div>
            </form>
            <div id="ai-assistant-response-container" class="mt-6 max-w-3xl mx-auto bg-gray-50 p-6 rounded-lg hidden whitespace-pre-wrap">
            </div>
        </section>

    </main>
    
    <div id="ai-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 hidden z-50">
        <div class="bg-white rounded-lg shadow-2xl w-full max-w-2xl max-h-[90vh] flex flex-col">
            <div class="flex justify-between items-center p-4 border-b">
                <h3 id="modal-title" class="text-xl font-bold text-[#003554]">ุชุญูู ููุดููุฏ</h3>
                <button id="modal-close-btn" class="text-gray-500 hover:text-gray-800 text-3xl">&times;</button>
            </div>
            <div id="modal-content" class="p-6 overflow-y-auto whitespace-pre-wrap">
                <div id="modal-loader" class="flex flex-col items-center justify-center py-10">
                    <div class="loader"></div>
                    <p class="mt-4 text-lg text-gray-600">ุฏุฑ ุญุงู ุชุญูู ุจุง Gemini...</p>
                </div>
                <div id="modal-text-content"></div>
            </div>
        </div>
    </div>

    <footer class="bg-[#003554] text-white text-center p-4 mt-8">
        <p>ุทุฑุงุญ ุดุฏู ุจุฑ ุงุณุงุณ ุณูุฏ ุฑุงูุจุฑุฏ ุณุงุณุช ุตูุนุช ุงุณุชุงู ฺฉุฑูุงู (ฑดฐธ-ฑดฐด)</p>
    </footer>

    <script>
        const tooltipTitleCallback = (tooltipItems) => {
            const item = tooltipItems[0];
            let label = item.chart.data.labels[item.dataIndex];
            if (Array.isArray(label)) {
                return label.join(' ');
            }
            return label;
        };

        const wrapLabel = (str, maxWidth) => {
            if (str.length <= maxWidth) {
                return str;
            }
            const words = str.split(' ');
            let lines = [];
            let currentLine = '';
            for (const word of words) {
                if ((currentLine + word).length > maxWidth) {
                    lines.push(currentLine.trim());
                    currentLine = '';
                }
                currentLine += word + ' ';
            }
            lines.push(currentLine.trim());
            return lines.filter(line => line.length > 0);
        };

        const colors = {
            primary: '#00A6FB',
            secondary: '#0582CA',
            dark: '#003554',
            light: '#006494',
            accent: '#051923'
        };

        const dualityData = {
            labels: ['ฑูช ุจุฑุชุฑ (ุดุฑฺฉุชโูุง ุจุฒุฑฺฏ)', 'นนูช ุณุงุฑ ุดุฑฺฉุชโูุง'],
            datasets: [{
                label: 'ุณูู ุฏุฑ ุงุฑุฒุด ุงูุฒูุฏู ุตูุนุช',
                data: [78, 22],
                backgroundColor: [colors.dark, colors.primary],
                borderColor: '#ffffff',
                borderWidth: 2
            }]
        };
        new Chart(document.getElementById('dualityChart'), {
            type: 'doughnut',
            data: dualityData,
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { position: 'top' },
                    tooltip: { callbacks: { title: tooltipTitleCallback } }
                }
            }
        });

        const investmentData = {
            labels: ['ูููุงุฏ', 'ุฎูุฏุฑู', 'ฺฉุดุงูุฑุฒ', 'ูุณ', 'ุงูุฑฺ ุฎูุฑุดุฏ', 'ุชุฌูุฒุงุช ุฎูุฑุดุฏ', 'ุชุชุงููู', 'ุชูุงูููุฏุณุงุฒูุง'],
            datasets: [
                {
                    label: 'ุณุฑูุงูโฺฏุฐุงุฑ ุนููู',
                    data: [270, 120, 100, 90, 10, 30, 35, 65],
                    backgroundColor: colors.secondary,
                },
                {
                    label: 'ุณุฑูุงูโฺฏุฐุงุฑ ุฎุตูุต',
                    data: [1280, 600, 700, 900, 2560, 250, 200, 0],
                    backgroundColor: colors.primary,
                }
            ]
        };
        new Chart(document.getElementById('investmentChart'), {
            type: 'bar',
            data: investmentData,
            options: {
                responsive: true,
                maintainAspectRatio: false,
                indexAxis: 'y',
                scales: {
                    x: { stacked: true, title: { display: true, text: 'ููุงุฑุฏ ุชููุงู' } },
                    y: { stacked: true }
                },
                plugins: {
                    legend: { position: 'top' },
                    tooltip: { callbacks: { title: tooltipTitleCallback } }
                }
            }
        });

        const timelineRawData = [
            { project: 'ุดูุฑุง ุณุงุณุช ุตูุนุช ู PMO', start: 1, end: 1 },
            { project: 'ูพูุฌุฑู ูุงุญุฏ ุณุฑูุงูโฺฏุฐุงุฑ', start: 1, end: 2 },
            { project: 'ุฏุณุชูุฑุงูุนูู ุขุจ ููุดููุฏ', start: 1, end: 1 },
            { project: 'ูพุงุฑฺฉ ุณุงุฒูโูุง ูููุงุฏ', start: 2, end: 7 },
            { project: 'ุจููโุณุงุฒ ูุทุนุงุช ูููุงุฏ', start: 2, end: 5 },
            { project: 'ุขุฒูุงุดฺฏุงู ุณู ู ฺฉุงุจู', start: 2, end: 5 },
            { project: 'ุจุงุฒุงูุช ุถุงุนุงุช ูุณ', start: 2, end: 7 },
            { project: 'ูุฑฺฉุฒ ุขุฒููู ุฎูุฏุฑู', start: 2, end: 7 },
            { project: 'ฺฉูุณุฑุณูู ูุงูุจโุณุงุฒ', start: 2, end: 6 },
            { project: 'ุทุฑุงุญ ุจูุฏุฑ ุฎุดฺฉ ุณุฑุฌุงู', start: 2, end: 3 },
            { project: 'ุทุฑุงุญ ูุงุจ ุณุฑุฏุฎุงูู ุฌุฑูุช', start: 2, end: 2 },
            { project: 'ููุฌ ุงูู ูุฑูฺฏุงู ุฎูุฑุดุฏ', start: 2, end: 5 },
            { project: 'ฺฏูุฎุงูู ฺฉูโูุตุฑู ุฌุฑูุช', start: 4, end: 7 },
            { project: 'ุณุงุฎุช ูุงุจ ุณุฑุฏุฎุงูู ุฌุฑูุช', start: 4, end: 7 },
            { project: 'ูพุงุฑฺฉ ุชุฌูุฒุงุช ุฎูุฑุดุฏ', start: 4, end: 6 },
            { project: 'ูพุงููุช ุฎูุฑุดุฏ+ุขุจโุดุฑูโฺฉู', start: 4, end: 6 },
            { project: 'ูุฑฺฉุฒ ุชูุณุนู ุชุชุงููู', start: 4, end: 6 },
        ];

        const timelineLabels = timelineRawData.map(p => wrapLabel(p.project, 25));
        const timelineData = {
            labels: timelineLabels,
            datasets: [{
                label: 'ุจุงุฒู ุฒูุงู ูพุฑูฺู',
                data: timelineRawData.map(p => [p.start, p.end]),
                backgroundColor: (context) => {
                    const value = context.raw[1] - context.raw[0];
                    if (value > 4) return colors.dark;
                    if (value > 2) return colors.secondary;
                    return colors.primary;
                },
                borderColor: colors.accent,
                borderWidth: 1,
                barPercentage: 0.6,
                categoryPercentage: 0.8,
                borderRadius: 4,
            }]
        };
        new Chart(document.getElementById('timelineChart'), {
            type: 'bar',
            data: timelineData,
            options: {
                indexAxis: 'y',
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    x: {
                        min: 0,
                        max: 16,
                        title: { display: true, text: 'ูุตูโูุง ุงุฌุฑุง ุงุฒ ุงุจุชุฏุง ฑดฐด' },
                        ticks: {
                            stepSize: 1,
                            callback: function(value, index, ticks) {
                                if (value === 0) return '';
                                const year = 1404 + Math.floor((value - 1) / 4);
                                const quarter = ((value - 1) % 4) + 1;
                                return `ู${quarter} ${year}`;
                            }
                        }
                    },
                    y: {
                        ticks: {
                            font: { size: 10 }
                        }
                    }
                },
                plugins: {
                    legend: { display: false },
                    tooltip: {
                        callbacks: {
                            title: tooltipTitleCallback,
                            label: function(context) {
                                const start = context.raw[0];
                                const end = context.raw[1];
                                const startYear = 1404 + Math.floor((start - 1) / 4);
                                const startQ = ((start - 1) % 4) + 1;
                                const endYear = 1404 + Math.floor((end - 1) / 4);
                                const endQ = ((end - 1) % 4) + 1;
                                return `ุงุฒ ูุตู ${startQ} ุณุงู ${startYear} ุชุง ูุตู ${endQ} ุณุงู ${endYear}`;
                            }
                        }
                    }
                }
            }
        });

        // Gemini API Integration
        const modal = document.getElementById('ai-modal');
        const modalTitle = document.getElementById('modal-title');
        const modalContent = document.getElementById('modal-content');
        const modalLoader = document.getElementById('modal-loader');
        const modalTextContent = document.getElementById('modal-text-content');
        const modalCloseBtn = document.getElementById('modal-close-btn');

        const openModal = () => modal.classList.remove('hidden');
        const closeModal = () => modal.classList.add('hidden');

        modalCloseBtn.addEventListener('click', closeModal);
        modal.addEventListener('click', (e) => {
            if (e.target === modal) {
                closeModal();
            }
        });

        async function callGeminiAPI(prompt, targetElement) {
            // =======================================================================
            // ==================> ุชูุฌู: ฺฉูุฏ API ุฎูุฏ ุฑุง ุงูุฌุง ูุฑุงุฑ ุฏูุฏ <==================
            // =======================================================================
             const apiKey = "curl "https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent" \
  -H 'Content-Type: application/json' \
  -H 'X-goog-api-key: GEMINI_API_KEY' \
  -X POST \
  -d '{
    "contents": [
      {
        "parts": [
          {
            "text": "Explain how AI works in a few words"
          }
        ]
      }
    ]
  }'"; // <--- ฺฉูุฏ API ุฎูุฏ ุฑุง ุฌุงฺฏุฒู ุงู ุนุจุงุฑุช ฺฉูุฏ
             
             const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${apiKey}`;
             
             let retries = 3;
             let delay = 1000;

             while (retries > 0) {
                 try {
                     const response = await fetch(apiUrl, {
                         method: 'POST',
                         headers: { 'Content-Type': 'application/json' },
                         body: JSON.stringify({ contents: [{ parts: [{ text: prompt }] }] })
                     });

                     if (!response.ok) {
                         throw new Error(`HTTP error! status: ${response.status}`);
                     }

                     const result = await response.json();
                     const text = result.candidates?.[0]?.content?.parts?.[0]?.text;
                     if (text) {
                         targetElement.innerHTML = text.replace(/\*/g, '<span class="font-bold">').replace(/(\n)/g, '<br/>');
                         return;
                     } else {
                         throw new Error("ูพุงุณุฎ ูุงูุนุชุจุฑ ุงุฒ Gemini API");
                     }
                 } catch (error) {
                     console.error("Gemini API call failed:", error);
                     retries--;
                     if (retries === 0) {
                         targetElement.textContent = "ูุชุงุณูุงูู ุฏุฑ ุญุงู ุญุงุถุฑ ุงูฺฉุงู ุชุญูู ูุฌูุฏ ูุฏุงุฑุฏ. ูุทูุง ุจุนุฏุง ุชูุงุด ฺฉูุฏ.";
                     } else {
                        await new Promise(res => setTimeout(res, delay));
                        delay *= 2;
                     }
                 }
             }
        }


        document.querySelectorAll('.ai-analysis-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                const pillar = btn.dataset.pillar;
                modalTitle.textContent = `ุชุญูู ููุดููุฏ SWOT: ${pillar}`;
                modalTextContent.innerHTML = '';
                modalLoader.style.display = 'flex';
                openModal();
                
                const prompt = `ุจู ุนููุงู ฺฉ ุชุญููฺฏุฑ ุงุฑุดุฏ ุงุณุชุฑุงุชฺ ุตูุนุชุ ฺฉ ุชุญูู SWOT (ููุงุท ููุชุ ุถุนูุ ูุฑุตุชุ ุชูุฏุฏ) ุจุฑุง ูุญูุฑ ุฑุงูุจุฑุฏ "${pillar}" ุฏุฑ ุจุฑูุงูู ุชูุณุนู ุตูุนุช ุงุณุชุงู ฺฉุฑูุงู ุงุฑุงุฆู ุฏูุฏ. ุชุญูู ุฎูุฏ ุฑุง ุจุฑ ุงุณุงุณ ฺุงูุดโูุง ฺฉูุฏ ุงุณุชุงู ูุงููุฏ ฺฉูุจูุฏ ุขุจ ู ุงูุฑฺ ู ูุฏู ฺฏุฐุงุฑ ุงุฒ ุงูุชุตุงุฏ ููุจุนโูุญูุฑ ุจู ุงูุชุตุงุฏ ุฏุงูุดโุจูุงูุ ุงุณุชูุงุฑ ฺฉูุฏ.`;
                
                callGeminiAPI(prompt, modalTextContent).finally(() => {
                    modalLoader.style.display = 'none';
                });
            });
        });

        const aiAssistantForm = document.getElementById('ai-assistant-form');
        const aiQuestionInput = document.getElementById('ai-question-input');
        const aiResponseContainer = document.getElementById('ai-assistant-response-container');

        aiAssistantForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const question = aiQuestionInput.value.trim();
            if (!question) return;

            aiResponseContainer.classList.remove('hidden');
            aiResponseContainer.innerHTML = '<div class="flex items-center justify-center"><div class="loader"></div><p class="mr-4">ุฏุฑ ุญุงู ูพุฑุฏุงุฒุด ุณูุงู ุดูุง...</p></div>';
            
            const prompt = `ุดูุง ฺฉ ุฏุณุชุงุฑ ููุดููุฏ ูุณุชุฏ ฺฉู ุจู ุณูุงูุงุช ูุฑุจูุท ุจู "ุณูุฏ ุฑุงูุจุฑุฏ ุณุงุณุช ุตูุนุช ุงุณุชุงู ฺฉุฑูุงู (ฑดฐธ-ฑดฐด)" ูพุงุณุฎ ูโุฏูุฏ. ุฎูุงุตู ุณูุฏ ุงู ุงุณุช: ุงู ฺฉ ุจุฑูุงูู ธฒฑฐ ููุงุฑุฏ ุชููุงู ุจุฑุง ฺฏุฐุงุฑ ฺฉุฑูุงู ุงุฒ ุงูุชุตุงุฏ ูุจุชู ุจุฑ ููุงุจุน ุจู ฺฉ ูุทุจ ุตูุนุช ูพุดุฑูุชู ุงุณุช ฺฉู ุจุง ฺุงูุดโูุง ุขุจ ู ุงูุฑฺ ุฑูุจุฑูุณุช ู ุจุฑ ต ูุญูุฑ ุงุตู (ููุฒุงุชุ ุฎูุฏุฑูุ ฺฉุดุงูุฑุฒ ููุงูุฑุงููุ ุงูุฑฺ ุฎูุฑุดุฏุ ู ุชุชุงููู) ุชูุฑฺฉุฒ ุฏุงุฑุฏ ู ูุฏู ูุงู ุขู ุจุฑ ุงูุฑูโุณุงุฒ ุณุฑูุงู ุฎุตูุต ุงุณุชูุงุฑ ุงุณุช. ุญุงูุง ุจู ุงู ุณูุงู ูพุงุณุฎ ุฏูุฏ: ${question}`;

            callGeminiAPI(prompt, aiResponseContainer);
            aiQuestionInput.value = '';
        });

    </script>
</body>
</html>



